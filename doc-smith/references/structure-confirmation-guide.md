# 文档结构确认指南

本文档提供如何向用户展示文档结构并处理反馈的详细指南。

## 目的

这是避免浪费资源的关键检查点。在生成文档内容前，必须确保规划的结构符合用户需求。

## 展示方式

以清晰、易读的方式向用户展示规划的文档结构。

### 必须包含的信息

1. **文档总数**：让用户快速了解规模
2. **文档层次结构**：顶层文档及其子文档
3. **每个文档的标题、描述**：让用户理解每个文档的内容

### 标准展示格式

使用 emoji、编号和缩进来增强可读性：

```
📋 文档结构规划完成

根据用户意图，我规划了以下 5 个文档：

1. 📘 概述 (/overview.md)
   - 项目介绍和核心概念

2. 🚀 快速开始 (/getting-started.md)
   - 安装、配置和第一个示例

3. 💻 API 参考 (/api.md)
   - API 使用说明
   - 源文件：src/api/
   └── 3.1 认证 (/api/authentication.md)
       - 认证方式和示例
   └── 3.2 端点 (/api/endpoints.md)
       - 所有 API 端点详情

4. ❓ FAQ (/faq.md)
   - 常见问题解答

5. 🔧 故障排查 (/troubleshooting.md)
   - 常见问题和解决方案

---

[使用 AskUserQuestion 工具]
问题：文档结构是否符合您的需求？
选项：✅ 确认，开始生成文档
```

### 推荐的 Emoji 使用

- 📘 概述/介绍
- 🚀 快速开始
- 💻 API/代码
- 🔧 配置/工具
- 📖 指南/教程
- ❓ FAQ/帮助
- 🏗️ 架构/设计
- 🔍 故障排查
- 📊 示例/演示
- ⚙️ 配置/设置

## 处理用户反馈

识别用户意图并执行相应操作：

### 反馈类型

1. **删除文档**：从 document_structure.yaml 删除条目，如果是父文档则连同子文档一起删除
2. **添加文档**：确定位置、title、description、path、sourcePaths 和 icon（如果是顶层文档）
3. **调整层次**：合并/拆分子文档，或调整父子关系
4. **修改内容范围**：更新 description 和 sourcePaths
5. **确认无误**：进入步骤 6 生成文档内容

### 操作要点

- 每次修改后更新文档总数
- 重新展示完整结构
- 简要说明做了什么改动
- 询问用户是否确认

## 交互示例

```
Agent: 📋 文档结构规划完成
[展示 5 个文档的结构]

---

[Agent 使用 AskUserQuestion 工具]
问题：文档结构是否符合您的需求？
选项：✅ 确认，开始生成文档

---

User: [选择 ✏️ Other] FAQ 和故障排查合并，API 参考不要拆分

---

Agent: 好的，我将进行以下调整：
1. 合并 FAQ 和故障排查
2. 合并 API 参考的子文档

📋 更新后的文档结构
[展示 3 个文档的结构]

---

[Agent 使用 AskUserQuestion 工具]
问题：文档结构是否符合您的需求？
选项：✅ 确认，开始生成文档

---

User: ✅ 确认，开始生成文档

---

Agent: 收到确认，开始生成文档内容...
```

## 关键原则

1. **每次修改后都要重新展示完整结构** - 不要只说"已修改"
2. **支持多轮调整** - 耐心处理用户的每一次反馈
3. **用户确认后才进入步骤 6** - 绝对不要在确认前开始生成内容
4. **清晰传达变化** - 简要说明改动内容
5. **理解用户意图** - 反馈可能不够精确，需要确认理解是否正确
