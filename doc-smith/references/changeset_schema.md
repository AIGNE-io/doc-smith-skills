# Changeset 文件理解指南

## 核心原则

Changeset 只包含两类修改：
1. **全局语义修改** - 跨文档的规则、术语、风格
2. **结构重写** - 补充、重写、重组特定章节

## 读取和理解

Changeset 是自然语言文本，格式自由。你需要：
1. 读取文件全部内容
2. 识别所有修改请求
3. 分类为"全局修改"或"结构重写"
4. 按优先级执行：全局修改 → 结构重写

## 识别规则

### 全局修改特征
- 关键词："所有"、"统一"、"全部"、"删除"
- 跨多个文档的规则
- 术语、风格、格式的一致性

**示例：**
```
"所有 API 改为 API 接口"         → 全局修改
"删除所有第一人称"               → 全局修改
"代码块统一添加语言标识符"       → 全局修改
```

### 结构重写特征
- 关键词："补充"、"添加"、"重写"、"重组"
- 指定文档或章节
- 需要生成新内容

**示例：**
```
"overview.md 补充项目背景"       → 结构重写
"快速开始添加环境要求章节"       → 结构重写
"API 文档补充错误码说明"         → 结构重写
```

## 执行流程

### 1. 读取文件

读取 changeset 文件，只读取用户指令中指定的文件，忽略其他 changeset 文件。

### 2. 分类汇总

**全局修改：**
- 1: ...
- 2: ...

**结构重写：**
- 文档 A, 章节 X: ...
- 文档 B, 章节 Y: ...

### 3. 执行修改

**优先级：** 全局修改 → 结构重写

**全局修改：**
遍历所有文档，应用规则

**结构重写：**
定位章节，读取上下文，重新生成内容

### 4. 展示摘要

列出所有执行的修改和受影响的文件

## 处理歧义

**模糊描述：** 询问用户具体要求

**范围不明：** 先搜索确定影响范围，再执行

**冲突规则：** 说明冲突，询问优先级
