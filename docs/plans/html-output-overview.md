# Doc-Smith HTML 输出

> 将文档输出从 Markdown 改为静态 HTML，实现更轻量的发布

## 为什么？

当前发布平台 Discuss Kit 太重，每次发布都需要完整的 Discuss Kit 运行环境。改为生成静态 HTML 后，可以部署到任意静态托管服务（如 GitHub Pages、Vercel、Nginx）。

## 核心体验

```
用户执行 /doc-smith-create
        ↓
AI 分析数据源，规划文档结构
        ↓
AI 直接生成 HTML 内容（使用预定义 CSS 类名）
        ↓
组装为完整静态站点
        ↓
.aigne/doc-smith/site/
├── index.html
├── zh/guide/intro.html
├── en/guide/intro.html
└── assets/css/theme.css
        ↓
/doc-smith-publish --preview  → 本地预览
/doc-smith-publish --static   → 上传到静态托管
```

## 架构

```
┌─────────────────────────────────────────────────────────┐
│                  doc-smith-create                       │
│                                                         │
│  ┌─────────┐    ┌─────────────────┐    ┌─────────────┐ │
│  │数据源   │ →  │AI 生成 HTML 内容 │ →  │组装静态站点 │ │
│  │分析    │     │(CSS 类名约束)    │     │            │ │
│  └─────────┘    └─────────────────┘    └─────────────┘ │
│                         ↑                               │
│                  ┌──────────────┐                       │
│                  │ theme.css    │                       │
│                  │ (全局样式)    │                       │
│                  └──────────────┘                       │
└─────────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────────┐
│                    输出: site/                          │
│  ├── zh/guide/intro.html  (中文)                       │
│  ├── en/guide/intro.html  (英文)                       │
│  └── assets/css/theme.css (样式)                       │
└─────────────────────────────────────────────────────────┘
                         ↓
┌─────────────────────────────────────────────────────────┐
│                 doc-smith-publish                       │
│  ├── --preview  → 本地预览 (http://localhost:3000)     │
│  ├── --static   → 静态托管发布                          │
│  └── --url      → Discuss Kit (保留兼容)               │
└─────────────────────────────────────────────────────────┘
```

## 关键决策

| 问题 | 决策 | 原因 |
|------|------|------|
| 如何保证样式一致？ | CSS 类名约束 | AI 使用预定义类名，全局 CSS 控制样式 |
| Markdown 还是 HTML？ | 直接 HTML | 省去 MD→HTML 转换消耗 |
| 多语言如何组织？ | 独立路径 /zh/, /en/ | 结构清晰，便于 SEO |
| 深色模式？ | 跟随系统 | 尊重用户偏好 |
| 与 Discuss Kit 兼容？ | 渐进迁移 | 保留旧发布方式，逐步切换 |

## 范围

**包含**
- HTML 内容生成
- 内置文档风主题
- 多语言、深色模式
- 本地预览
- 静态托管发布

**不包含**
- 站内搜索
- 自定义主题上传
- PDF 导出

## 风险

| 风险 | 缓解 |
|------|------|
| AI 不遵循 CSS 类名 | Prompt 明确 + 校验工具 |
| HTML 质量不稳定 | 提供示例模板 |

## 下一步

1. 设计 CSS 类名规范和默认主题
2. 改造 `doc-smith-content` agent 输出 HTML
3. 新增 `--preview` 本地预览功能
4. 实现静态托管发布
