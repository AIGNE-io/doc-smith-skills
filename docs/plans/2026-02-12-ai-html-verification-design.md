# AI HTML 巡检设计

## 背景

build.mjs 脚本处理 MD→HTML 转换和多语言导航生成，能节省 AI 处理的消耗和时间。但脚本无法覆盖所有边缘情况，有时会产生预期外的结果（如侧边栏标题未翻译、anchor ID 语言不匹配、重定向文本未本地化等）。

## 方案

在 `doc-smith-create` 和 `doc-smith-localize` 的工作流中，build 完成后、git commit 前，插入一个轻量级 AI 巡检步骤。

## 设计决策

- **触发时机**：build/translate 之后自动触发，不需要手动调用
- **检查范围**：基于生成约束检查，不硬编码检查清单，AI 自行判断
- **修复策略**：发现问题直接修改 HTML 文件，不需要用户确认
- **实现方式**：在 SKILL.md 工作流中加一句自然语言指令，不需要独立 reference 文件
- **控制消耗**：抽查每种语言 1-2 个页面，不做全量扫描

## 流程位置

### doc-smith-create

```
并行生成图片 → AI 巡检 → 自动提交
```

### doc-smith-localize

```
更新图片引用 → AI 巡检 → 翻译报告 → 自动提交
```

## 指令内容

> 构建完成后，读取 dist/ 中生成的 HTML 文件（每种语言各抽查 1-2 个页面），检查输出是否符合预期。如有问题直接修改 HTML 文件修复。
